<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>ููุง ฺฉุฑุฏู ุฎุฑุฏ | ุฑูุณุฑ ฑฑฐ ูููู</title>

  <link href="https://fonts.googleapis.com/css2?family=Vazirmatn:wght@300;400;500;600;700&display=swap" rel="stylesheet">

  <link rel="icon" href="favicon.ico" type="image/x-icon">

  <link rel="stylesheet" href="style.css" />
</head>
<body class="light-theme">

  <header>
    <div class="logo">ุฑูุณุฑ ฑฑฐ ูููู</div>
    <nav>
      <button id="theme-toggle" class="btn btn-outline" title="ุชุบุฑ ุชู">๐</button>
      <a href="index.html" class="btn btn-outline">ุจุงุฒฺฏุดุช ุจู ูุฑูุดฺฏุงู</a>
    </nav>
  </header>

  <main class="container" style="padding: 3rem 5%;">
    <h1>ุฌูุนโุจูุฏ ู ููุง ฺฉุฑุฏู ุณูุงุฑุด</h1>

    <section class="cart-section">
      <h2>ูุญุตููุงุช ุงูุชุฎุงุจโุดุฏู</h2>
      <div class="table-responsive">
        <table>
          <thead>
            <tr>
              <th>ูุญุตูู</th>
              <th>ููุช ูุงุญุฏ</th>
              <th>ุชุนุฏุงุฏ</th>
              <th>ุฌูุน</th>
            </tr>
          </thead>
          <tbody id="checkout-items"></tbody>
          <tfoot>
            <tr>
              <td colspan="3" class="total-label">ุฌูุน ฺฉู:</td>
              <td id="checkout-total" class="total-value">ฐ ุชููุงู</td>
            </tr>
          </tfoot>
        </table>
      </div>
    </section>

    <section style="margin-top: 3rem; max-width: 600px; margin-left: auto; margin-right: auto;">
      <h2>ุงุทูุงุนุงุช ุชุญูู</h2>

      <form style="display: flex; flex-direction: column; gap: 1.6rem; margin-top: 1.8rem;">
        <input type="text" placeholder="ูุงู ู ูุงู ุฎุงููุงุฏฺฏ" required>
        <input type="tel" placeholder="ุดูุงุฑู ููุจุงู" required pattern="[0-9]{11}">

        <div class="shipping-options">
          <h3 style="margin-bottom: 1rem; font-size: 1.1rem; color: var(--muted);">ุฑูุด ุงุฑุณุงู</h3>
          
          <label class="shipping-card">
            <input type="radio" name="shipping" value="snap" disabled>
            <div class="card-content">
              <div class="icon">๐</div>
              <div class="info">
                <strong>ุงุฑุณุงู ุจุง ุงุณููพ</strong>
                <span class="soon">ุจู ุฒูุฏ ูุนุงู ูโุดูุฏ</span>
              </div>
            </div>
          </label>

          <label class="shipping-card">
            <input type="radio" name="shipping" value="inperson" checked required>
            <div class="card-content">
              <div class="icon">๐ฌ</div>
              <div class="info">
                <strong>ุชุญูู ุญุถูุฑ</strong>
                <span class="desc">ุฎูุฏุชุงู ุจู ูุฑูุดฺฏุงู ูุฑุงุฌุนู ฺฉูุฏ ู ุณูุงุฑุด ุฑุง ุชุญูู ุจฺฏุฑุฏ</span>
              </div>
            </div>
          </label>
        </div>

        <div style="margin-top: 1.5rem; padding: 1.2rem; background: rgba(107,33,168,0.05); border-radius: 12px; font-size: 0.95rem; color: var(--muted); line-height: 1.6;">
          <strong>ุณุงุนุงุช ฺฉุงุฑ ูุฑูุดฺฏุงู:</strong><br>
          ุดูุจู ุชุง ฺูุงุฑุดูุจู: ธ ุตุจุญ ุชุง ถ ุนุตุฑ<br>
          ูพูุฌโุดูุจู: ธ ุตุจุญ ุชุง ฒ ุธูุฑ<br>
          ุฌูุนู: ุชุนุทู
        </div>
      </form>
    </section>
    <section style="margin-top: 4rem; text-align: center; max-width: 600px; margin-left: auto; margin-right: auto; padding: 2rem; background: var(--card-bg); border-radius: 16px; box-shadow: 0 8px 25px rgba(0,0,0,0.1);">
      <h2>ูพุฑุฏุงุฎุช ููุง (ุชุณุช / ุฏูู)</h2>
      <p style="font-size: 1.3rem; margin: 1rem 0;">ุฌูุน ฺฉู: <span id="checkout-total" class="total-value">ฐ ุชููุงู</span></p>

      <button type="button" class="btn btn-primary" id="fake-pay-button" 
              style="font-size:1.4rem; padding:1.3rem 3.5rem; margin-top:1.5rem; background: linear-gradient(90deg, #10b981, #34d399);">
        ูพุฑุฏุงุฎุช ุงูฺฉ (ุดุจูโุณุงุฒ)
      </button>

      <!-- ุงููุดู ูพุฑุฏุงุฒุด -->
      <div id="payment-processing" class="payment-processing hidden" style="margin-top:2rem;">
        <div class="loader"></div>
        <p style="margin-top:1rem; font-size:1.2rem; color: var(--text);">ุฏุฑ ุญุงู ูพุฑุฏุงุฒุด ูพุฑุฏุงุฎุช...</p>
      </div>

      <!-- ูพุงู ููููุช -->
      <div id="payment-success" class="payment-success hidden" style="margin-top:2rem;">
        <h3 style="color:#10b981; font-size:2rem; margin-bottom:1rem;">ูพุฑุฏุงุฎุช ุจุง ููููุช ุงูุฌุงู ุดุฏ!</h3>
        <p style="font-size:1.2rem; color:#374151;">ุณุจุฏ ุฎุฑุฏ ุฎุงู ุดุฏ. ุณูุงุฑุด ุดูุง ุซุจุช ุดุฏ.</p>
        <button onclick="window.location.href='index.html'" class="btn btn-outline" style="margin-top:1.5rem; font-size:1.1rem;">
          ุจุงุฒฺฏุดุช ุจู ูุฑูุดฺฏุงู
        </button>
      </div>
    </section>
  </main>

  <script src="script.js"></script>

  <script>
    function updateCheckoutCart() {
      const cart = JSON.parse(localStorage.getItem("cart")) || [];
      const itemsBody = document.getElementById("checkout-items");
      const totalEl = document.getElementById("checkout-total");
      let total = 0;

      itemsBody.innerHTML = ''; // ูพุงฺฉ ฺฉุฑุฏู ุฌุฏูู ูุจู

      if (cart.length === 0) {
        itemsBody.innerHTML = '<tr><td colspan="4" style="text-align:center; padding:2rem; color:var(--muted);">ุณุจุฏ ุฎุฑุฏ ุฎุงู ุงุณุช</td></tr>';
      } else {
        cart.forEach(item => {
          const sum = item.price * item.quantity;
          total += sum;
          itemsBody.innerHTML += `
            <tr>
              <td>${item.name}</td>
              <td>${item.price.toLocaleString("fa-IR")}</td>
              <td>${item.quantity}</td>
              <td>${sum.toLocaleString("fa-IR")}</td>
            </tr>
          `;
        });
      }

      totalEl.textContent = `${total.toLocaleString("fa-IR")} ุชููุงู`;
    }


    updateCheckoutCart();

    window.addEventListener('storage', function(e) {
      if (e.key === 'cart') {
        updateCheckoutCart();
      }
    });

    window.addEventListener('focus', updateCheckoutCart);
    document.getElementById("fake-pay-button").addEventListener("click", function() {
      const cart = JSON.parse(localStorage.getItem("cart")) || [];
      if (cart.length === 0) {
        alert("ุณุจุฏ ุฎุฑุฏ ุฎุงู ุงุณุช!");
        return;
      }

      // ูุญุงุณุจู ูุจูุบ ุฏูู ุจุฑุง ููุงุด ุฏุฑ ูพุงู
      let amount = 0;
      cart.forEach(item => amount += item.price * item.quantity);
      const amountText = amount.toLocaleString("fa-IR") + " ุชููุงู";

      // ูุฎู ฺฉุฑุฏู ุฏฺฉูู ู ูุดุงู ุฏุงุฏู ูพุฑุฏุงุฒุด
      this.style.display = "none";
      document.getElementById("payment-processing").classList.remove("hidden");

      // ุดุจูโุณุงุฒ ุชุงุฎุฑ ูพุฑุฏุงุฎุช (ณ.ต ุซุงูู)
      setTimeout(() => {
        document.getElementById("payment-processing").classList.add("hidden");
        document.getElementById("payment-success").classList.remove("hidden");

        // ุฎุงู ฺฉุฑุฏู ุณุจุฏ ุฎุฑุฏ
        localStorage.removeItem("cart");

        // ุจุฑูุฒ ฺฉุฑุฏู ุฌุฏูู
        updateCheckoutCart();

        // ูพุงู ุฏูู ุฏุฑ alert ูุฑูุฑฺฏุฑ
        alert("ูพุฑุฏุงุฎุช ูุจูุบ " + amountText + " ุจุง ููููุช ุงูุฌุงู ุดุฏ.\nุจุฑุง ุชฺฉูู ุฎุฑุฏ ุฑู ฺฏุฒูู OK ฺฉูฺฉ ฺฉูุฏ.");
      }, 3500);
    });
  </script>
</body>
</html>